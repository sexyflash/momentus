<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentus</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.12.0/toastify.min.css">
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #F9F9F9;
            color: #1D1D1F;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            overflow: hidden;
        }
        
        .hero {
            position: relative;
            width: 100%;
            max-height: 493px;
            overflow: hidden;
        }
        
        .hero img {
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        
        .hero-content {
            padding: 50px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 30px;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .subtitle {
            color: #86868B;
            font-size: 16px;
            font-weight: 700;
            display: inline-block;
        }
        
        .title {
            color: #1D1D1F;
            font-size: 38px;
            font-weight: 700;
            margin-bottom: 15px;
            line-height: 1.2;
            word-break: keep-all;
        }
        
        .description {
            color: #1D1D1F;
            font-size: 17px;
            font-weight: 400;
            line-height: 1.5;
            word-break: keep-all;
            max-width: 560px;
            margin: 0 auto;
        }
        
        .cta {
            color: #0066CC;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 15px;
            padding: 12px 24px;
            border: 2px solid #0066CC;
            border-radius: 30px;
            transition: all 0.3s ease;
        }
        
        .cta:hover {
            background-color: #0066CC;
            color: white;
            text-decoration: none !important;
        }
        
        .card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 24px;
            padding: 0 20px;
            margin: 30px auto 60px;
            max-width: 1200px;
        }
        
        .card {
            background: white;
            border-radius: 14px;
            padding: 40px 30px;
            width: 100%;
            max-width: 323px;
            height: auto;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
        }
        
        .card-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            height: 100%;
        }
        
        .card-icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
        }
        
        .card-title {
            font-size: 24px;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 15px;
            word-break: keep-all;
        }
        
        .card-description {
            font-size: 18px;
            font-weight: 400;
            line-height: 1.5;
            margin-bottom: 20px;
            flex-grow: 1;
            word-break: keep-all;
        }
        
        .card-link {
            color: #0066CC;
            font-size: 15px;
            font-weight: 700;
            line-height: 20px;
            cursor: pointer;
            display: inline-block;
            transition: transform 0.2s ease;
            padding-bottom: 2px;
            border-bottom: 1px solid transparent;
        }
        
        .card-link:hover {
            transform: translateX(3px);
            border-bottom: 1px solid #0066CC;
        }
        
        .footer {
            text-align: center;
            padding: 30px 20px;
            color: #6E6E73;
            font-size: 12px;
        }
        
        .footer-links {
            margin: 10px 0;
        }
        
        .footer-link {
            font-weight: 700;
            cursor: pointer;
        }
        
        .footer-divider {
            margin: 0 10px;
        }
        
        .footer-tagline {
            margin-top: 10px;
        }
        
        /* ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            width: 90%;
            max-width: 380px;
            background-color: white;
            border-radius: 14px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            position: relative;
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .overlay.active .modal {
            transform: translateY(0);
            opacity: 1;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #86868B;
            font-size: 24px;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            color: #1D1D1F;
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1D1D1F;
            text-align: center;
            line-height: 1.3;
            word-break: keep-all;
        }
        
        .modal-description {
            font-size: 16px;
            line-height: 1.4;
            color: #86868B;
            margin-bottom: 25px;
            text-align: center;
            word-break: keep-all;
        }
        
        .date-input-container {
            margin-bottom: 25px;
        }
        
        .date-input-label {
            display: block;
            margin-bottom: 8px;
            font-size: 15px;
            font-weight: 700;
            color: #1D1D1F;
        }
        
        .date-input {
            width: 100%;
            padding: 15px;
            border: 1px solid #E5E5EA;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Pretendard', sans-serif;
            color: #1D1D1F;
            background-color: #F9F9F9;
            transition: border-color 0.2s ease;
        }
        
        .date-input:focus {
            outline: none;
            border-color: #0066CC;
        }
        
        .form-submit {
            width: 100%;
            padding: 15px;
            background-color: #0066CC;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-family: 'Pretendard', sans-serif;
        }
        
        .form-submit:hover {
            background-color: #0055B3;
        }
        
        /* ë¡œë”© ìŠ¤í”¼ë„ˆ ìŠ¤íƒ€ì¼ */
        .loading-spinner {
            display: none;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading .loading-spinner {
            display: inline-block;
        }
        
        .loading .button-text {
            display: none;
        }
        
        /* í”Œë«í”¼ì»¤ ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ */
        .flatpickr-calendar {
            font-family: 'Pretendard', sans-serif;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-radius: 10px;
            border: none;
            width: 100%;
        }
        
        .flatpickr-day.selected, 
        .flatpickr-day.startRange, 
        .flatpickr-day.endRange, 
        .flatpickr-day.selected.inRange, 
        .flatpickr-day.startRange.inRange, 
        .flatpickr-day.endRange.inRange, 
        .flatpickr-day.selected:focus, 
        .flatpickr-day.startRange:focus, 
        .flatpickr-day.endRange:focus, 
        .flatpickr-day.selected:hover, 
        .flatpickr-day.startRange:hover, 
        .flatpickr-day.endRange:hover, 
        .flatpickr-day.selected.prevMonthDay, 
        .flatpickr-day.startRange.prevMonthDay, 
        .flatpickr-day.endRange.prevMonthDay, 
        .flatpickr-day.selected.nextMonthDay, 
        .flatpickr-day.startRange.nextMonthDay, 
        .flatpickr-day.endRange.nextMonthDay {
            background: #0066CC;
            border-color: #0066CC;
        }
        
        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .card-container {
                gap: 20px;
                padding: 0 30px;
            }
        }
        
        @media (max-width: 768px) {
            .hero-content {
                padding: 40px 24px;
            }
            
            .title {
                font-size: 32px;
            }
            
            .description {
                font-size: 16px;
            }
            
            .card {
                max-width: 100%;
                margin: 0 auto;
                width: calc(100% - 30px);
            }
            
            .card-container {
                gap: 30px;
            }
            
            .modal {
                padding: 25px 20px;
            }
            
            .modal-title {
                font-size: 20px;
            }
            
            .modal-description {
                font-size: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .hero-content {
                padding: 40px 20px;
            }
            
            .title {
                font-size: 28px;
            }
            
            .subtitle {
                font-size: 15px;
            }
            
            .description {
                font-size: 15px;
                line-height: 1.4;
            }
            
            .card {
                padding: 30px 25px;
                border-radius: 12px;
                margin: 0 auto;
                width: 90%;
            }
            
            .card-container {
                padding: 0 10px;
            }
            
            .card-title {
                font-size: 19px;
                line-height: 1.3;
            }
            
            .cta {
                font-size: 16px;
                padding: 10px 20px;
            }
            
            .modal {
                padding: 20px 15px;
            }
            
            .modal-title {
                font-size: 18px;
            }
            
            .modal-description {
                font-size: 14px;
                margin-bottom: 20px;
            }
            
            .date-input {
                padding: 12px;
                font-size: 15px;
            }
            
            .form-submit {
                padding: 12px;
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <img src="assets/placeholder.png" alt="Hero Image">
        </div>
        
        <div class="hero-content">
            <div>
                <div class="subtitle">ë†“ì¹˜ê¸° ì‰¬ìš´ ìš°ë¦¬ ì•„ì´</div>
                <h1 class="title">ì˜ìœ ì•„ ê±´ê°•ê²€ì§„, ì¼ì •ë§Œ ë“±ë¡í•˜ì„¸ìš”</h1>
                <p class="description">ë°”ì˜ê²Œ ì§€ë‚´ë‹¤ ë³´ë©´ ê²€ì§„ ì‹œê¸°ê°€ í›Œì© ì§€ë‚˜ë²„ë¦¬ì£ ?<br>
                    ì˜ˆì•½í•˜ë ¤ê³  í•˜ë©´ ë³‘ì›ë„ ì´ë¯¸ ê½‰ ì°¨ ìˆê³ ìš”.<br>
                    ë‚ ì§œë§Œ ë“±ë¡í•˜ë©´ ê²€ì§„ ì‹œê¸°ê°€ ë‹¤ê°€ì˜¬ ë•Œ ìì—°ìŠ¤ëŸ½ê²Œ ì•Œë ¤ë“œë¦´ê²Œìš”.</p>
            </div>
            <div class="cta" id="babyAlertBtn">ìš°ë¦¬ ì•„ì´ ì•Œë¦¼ë°›ê¸°</div>
        </div>
        
        <div class="card-container" id="cardContainer">
            <div class="card">
                <div class="card-content">
                    <img class="card-icon" src="assets/icon_1.png" alt="Icon">
                    <div>
                        <h2 class="card-title">ì•„ì´ ì„±ì¥ë„,<br>ë‚´ ì‚¶ë„ ì•„ë¦„ë‹µê²Œ ê¸°ë¡í•˜ê¸°</h2>
                        <p class="card-description">ì•„ì´ ì‚¬ì§„ë§Œ ë‚¨ê¸°ëŠ” ê²ƒë„ ì¢‹ì§€ë§Œ,<br>
                            ì˜¤ëŠ˜ì˜ ìƒê°ê³¼ ìˆœê°„ì„ ë‚¨ê²¨ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?<br>
                            ëª‡ ì¤„ë§Œ ì ì–´ë„ AIê°€ ì •ë¦¬í•´ ì£¼ê³ ,<br>
                            ë°”ìœ ì¼ìƒì—ì„œë„ ë†“ì¹˜ì§€ ì•Šê²Œ ë„ì™€ì¤„ ê±°ì˜ˆìš”.</p>
                        <div class="card-link">
                            <a href="https://smartstore.naver.com/momentus_store/products/11277867624" target="_blank" rel="noopener noreferrer">ë‚´ í”Œë˜ë„ˆ ë§Œë“¤ê¸° â†’</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-content">
                    <img class="card-icon" src="assets/icon_2.png" alt="Icon">
                    <div>
                        <h2 class="card-title">ëª©ë™Â·ëŒ€ì¹˜ë™ ì—„ë§ˆë“¤ì€<br>ì¿ íŒ¡ë„ ë‹¤ë¥´ê²Œ ì“´ë‹¤?</h2>
                        <p class="card-description">ìš°ë¦° ì™œ í•˜ë‚˜ì”© ëˆŒëŸ¬ë´ì•¼ í•˜ëŠ”ë°,<br>
                            ëŒ€ì¹˜ë™ ì—„ë§ˆë“¤ì€ ì˜µì…˜, ì¬ê³ , ì‚¬ì´ì¦ˆë¥¼ í•œëˆˆì—?<br>
                            ìš°ë¦¬ë„ ì“¸ ìˆ˜ ìˆì–´ìš”. ì–´ë µì§€ ì•Šì•„ìš”.</p>
                        <div class="card-link">
                            <a href="https://www.instagram.com/p/DEUHTdQyzSQ/" target="_blank" rel="noopener noreferrer">ëŒ€ì¹˜ë™ ì¿ íŒ¡ ë¹„ë°€ í™•ì¸í•˜ê¸° â†’</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-content">
                    <img class="card-icon" src="assets/icon_3.png" alt="Icon">
                    <div>
                        <h2 class="card-title">í›ˆìœ¡, ìˆ˜ë©´êµìœ¡, ìœ ì•„ì‹â€¦<br>30ë¶„, 1ì‹œê°„ ì˜ìƒ ì–¸ì œ ë‹¤ ë³´ì£ ?</h2>
                        <p class="card-description">ê²€ìƒ‰í•˜ë©´ ì¢‹ì€ ì˜ìƒì€ ë§ì€ë°,<br>
                            ì •ì‘ ë³¼ ì‹œê°„ì´ ì—†ê³  ë´ë„ ë‹µì´ ì•ˆ ë‚˜ì˜¬ ë•Œ.<br>
                            ë”± í•µì‹¬ë§Œ ë½‘ì•„ì„œ ìš”ì•½í•´ ì£¼ê³ ,<br>
                            ì¶”ê°€ë¡œ ê¶ê¸ˆí•œ ê²ƒë„ ë°”ë¡œ ë‹µí•´ ì¤ë‹ˆë‹¤.</p>
                        <div class="card-link">
                            <a href="https://chromewebstore.google.com/detail/chatpage-ai-%EC%BD%98%ED%85%90%EC%B8%A0-%EC%9A%94%EC%95%BD/mcecffeookkllgkbflcdlbicolmfgifj?authuser=0&hl=ko" target="_blank" rel="noopener noreferrer">ë¹ ë¥´ê²Œ ìš”ì•½ ë°›ê¸° â†’</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-content">
                    <img class="card-icon" src="assets/icon_4.png" alt="Icon">
                    <div>
                        <h2 class="card-title">ì´ë¯¸ íŒ”ë¦° í˜¸í…”, íœì…˜, ìº í•‘ì¥?<br>ìš°ë¦¬ë„ ê°ˆ ìˆ˜ ìˆì–´ìš”.</h2>
                        <p class="card-description">ì—°íœ´, ê³µíœ´ì¼ì—” ì´ë¯¸ ì˜ˆì•½ ë?<br>
                            ì—¬í–‰ ì¸í”Œë£¨ì–¸ì„œë“¤ì´ ì•„ëŠ” ì˜ˆì•½ ë¹„ë²•,<br>
                            ê³§ ê³µê°œë©ë‹ˆë‹¤. ë†“ì¹˜ì§€ ë§ê³  ë¯¸ë¦¬ ì±™ê²¨ë³´ì„¸ìš”.</p>
                        <div class="card-link">
                            <a href="https://www.youtube.com/@everyday_dailyup" target="_blank" rel="noopener noreferrer">ë¯¸ë¦¬ êµ¬ë…í•˜ê¸° â†’</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <div>Â© 2025 <strong>momentus</strong>. All rights reserved.</div>
            <div class="footer-links">
                <a href="https://the-moment.us/apps/legal.html" class="footer-link" target="_blank" rel="noopener noreferrer">ì´ìš©ì•½ê´€</a>
                <span class="footer-divider">|</span>
                <a href="https://the-moment.us/apps/privacy-policy.html" class="footer-link" target="_blank" rel="noopener noreferrer">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                <span class="footer-divider">|</span>
                <a href="mailto:sexyflash+kidup@gmail.com" class="footer-link">ë¬¸ì˜í•˜ê¸°</a>
            </div>

            <div class="footer-tagline">We're here to support your journey. Always remember, momentus starts with you. ğŸš€</div>
        </div>
    </div>
    
    <!-- ë‚ ì§œ ì…ë ¥ ì˜¤ë²„ë ˆì´ -->
    <div class="overlay" id="babyDateOverlay">
        <div class="modal">
            <div class="modal-close" id="modalClose">Ã—</div>
            <h2 class="modal-title">ë„¤ì´ë²„í†¡í†¡ ì•Œë¦¼ë°›ê¸°</h2>
            <p class="modal-description">ì•„ì´ì˜ ì¶œìƒì¼ì„ ë“±ë¡í•˜ì‹œë©´ ê±´ê°•ê²€ì§„ ì¼ì •ì— ë§ì¶° ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤. ì…ë ¥í•˜ì‹  ì •ë³´ëŠ” ì•Œë¦¼ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
            
            <div class="date-input-container">
                <label for="babyBirthDate" class="date-input-label">ìš°ë¦¬ ì•„ì´ ì¶œìƒì¼</label>
                <input type="text" id="babyBirthDate" class="date-input" placeholder="ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”" readonly>
            </div>
            
            <button type="button" class="form-submit" id="submitBabyDate">
                <span class="button-text">ì•Œë¦¼ë°›ê¸°</span>
                <span class="loading-spinner"></span>
            </button>
        </div>
    </div>

    <!-- JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.12.0/toastify.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ìš”ì†Œ ì„ íƒ
            const babyAlertBtn = document.getElementById('babyAlertBtn');
            const babyDateOverlay = document.getElementById('babyDateOverlay');
            const modalClose = document.getElementById('modalClose');
            const submitBabyDate = document.getElementById('submitBabyDate');
            const babyBirthDate = document.getElementById('babyBirthDate');
            const cardContainer = document.getElementById('cardContainer');
            
            // ë„¤ì´ë²„í†¡í†¡ ì‚¬ìš©ì ID (URL íŒŒë¼ë¯¸í„°ì—ì„œ ê°€ì ¸ì˜¤ê¸°)
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get('user_id') || '';
            const botUserKey = urlParams.get('botUserKey') || '';
            
            // ì‚¬ìš©ì ID í™•ì¸
            if (!userId) {
                console.warn('ì‚¬ìš©ì IDê°€ ì—†ìŠµë‹ˆë‹¤. ì•Œë¦¼ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            }
            
            // ë‚ ì§œ ì„ íƒê¸° ì´ˆê¸°í™”
            const fpInstance = flatpickr(babyBirthDate, {
                locale: 'ko',
                dateFormat: 'Yë…„ mì›” dì¼',
                disableMobile: false, // ëª¨ë°”ì¼ì—ì„œ ë„¤ì´í‹°ë¸Œ ìº˜ë¦°ë” ëŒ€ì‹  flatpickr ì‚¬ìš©
                maxDate: new Date(), // ì˜¤ëŠ˜ ì´í›„ ë‚ ì§œ ì„ íƒ ë¶ˆê°€
                position: 'auto',
                static: true, // ëª¨ë°”ì¼ì—ì„œ ë” ì˜ ì‘ë™í•˜ë„ë¡
                monthSelectorType: 'static',
                animate: true
            });
            
            // ì•Œë¦¼ë°›ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            babyAlertBtn.addEventListener('click', function() {
                // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ìš©ì ìƒíƒœ í™•ì¸
                if (userId) {
                    checkExistingRegistration(userId);
                } else {
                    babyDateOverlay.classList.add('active');
                    document.body.style.overflow = 'hidden'; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë°©ì§€
                }
            });
            
            // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸
            modalClose.addEventListener('click', closeModal);
            
            // ì˜¤ë²„ë ˆì´ ë°°ê²½ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
            babyDateOverlay.addEventListener('click', function(e) {
                if (e.target === babyDateOverlay) {
                    closeModal();
                }
            });
            
            // ë“±ë¡ ì™„ë£Œ ì´ë²¤íŠ¸
            submitBabyDate.addEventListener('click', async function() {
                // ë‚ ì§œê°€ ì„ íƒë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (!babyBirthDate.value) {
                    // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ë¡œ ì•Œë¦¼
                    showToast('ì•„ì´ì˜ ì¶œìƒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”', 'error');
                    return;
                }
                
                // ì‚¬ìš©ì ID í™•ì¸
                if (!userId) {
                    showToast('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ì•Œë¦¼ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë©ë‹ˆë‹¤.', 'error');
                    return;
                }
                
                // ë²„íŠ¼ ë¡œë”© ìƒíƒœ í™œì„±í™”
                submitBabyDate.classList.add('loading');
                
                try {
                    // ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
                    const checkResult = await checkExistingRegistration(userId, true);
                    
                    if (checkResult && checkResult.exists) {
                        submitBabyDate.classList.remove('loading');
                        showToast(checkResult.message || 'ì´ë¯¸ ë“±ë¡ëœ ì•Œë¦¼ì´ ìˆìŠµë‹ˆë‹¤.', 'info');
                        closeModal();
                        return;
                    }
                    
                    // API í˜¸ì¶œì„ í†µí•´ ì˜ìœ ì•„ ê²€ì§„ ì•Œë¦¬ë¯¸ ë“±ë¡
                    const response = await fetch('https://arpzgawn3f.execute-api.ap-northeast-2.amazonaws.com/prod/kidup/register', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        credentials: 'omit',
                        body: JSON.stringify({
                            user_id: userId,
                            birth_date: babyBirthDate.value,
                            bot_user_key: botUserKey
                        })
                    });
                    
                    const data = await response.json();
                    
                    // ë²„íŠ¼ ë¡œë”© ìƒíƒœ ë¹„í™œì„±í™”
                    submitBabyDate.classList.remove('loading');
                    
                    if (data.status === 'success') {
                        // ëª¨ë‹¬ ë‹«ê¸° (ì„±ê³µ ì‘ë‹µì„ ë°›ì€ í›„ì— ë‹«ê¸°)
                        closeModal();
                        
                        // ì„±ê³µ í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
                        showToast('ì˜ìœ ì•„ ê²€ì§„ ì•Œë¦¼ ì„œë¹„ìŠ¤ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                        
                        // ê¸°ì¡´ ì½”ë“œì²˜ëŸ¼ localStorageì—ë„ ì €ì¥
                        localStorage.setItem('babyBirthDate', babyBirthDate.value);
                        
                        // ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì¡°ì • (ì¹´ë“œ ì»¨í…Œì´ë„ˆë¡œ ìŠ¤í¬ë¡¤)
                        setTimeout(() => {
                            cardContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }, 300);
                    } else {
                        // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
                        showToast(data.message || 'ì•Œë¦¼ ì„œë¹„ìŠ¤ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                    }
                } catch (error) {
                    console.error('API í˜¸ì¶œ ì˜¤ë¥˜:', error);
                    submitBabyDate.classList.remove('loading');
                    showToast('ì„œë²„ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'error');
                }
            });
            
            // ì´ë¯¸ ë“±ë¡ëœ ì•Œë¦¼ì´ ìˆëŠ”ì§€ í™•ì¸
            async function checkExistingRegistration(userId, silent = false) {
                try {
                    const response = await fetch(`https://arpzgawn3f.execute-api.ap-northeast-2.amazonaws.com/prod/kidup/status?user_id=${encodeURIComponent(userId)}`);
                    const data = await response.json();
                    
                    if (data.status === 'success' && data.data) {
                        if (!silent) {
                            // ì´ë¯¸ ë“±ë¡ëœ ì•Œë¦¼ì´ ìˆë‹¤ë©´ ì•Œë¦¼ì°½ í‘œì‹œ
                            showToast('ì´ë¯¸ ë“±ë¡ëœ ì˜ìœ ì•„ ê²€ì§„ ì•Œë¦¼ì´ ìˆìŠµë‹ˆë‹¤.', 'info');
                        }
                        return { 
                            exists: true, 
                            message: 'ì´ë¯¸ ë“±ë¡ëœ ì˜ìœ ì•„ ê²€ì§„ ì•Œë¦¼ì´ ìˆìŠµë‹ˆë‹¤.',
                            data: data.data
                        };
                    }
                    return { exists: false };
                } catch (error) {
                    console.error('ìƒíƒœ ì¡°íšŒ ì˜¤ë¥˜:', error);
                    return { exists: false };
                }
            }
            
            // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í•¨ìˆ˜
                function showToast(message, type) {
                    const bgColor = type === 'success' ? '#0066CC' : 
                                    type === 'info' ? '#34C759' : '#FF3B30';
                    
                    Toastify({
                        text: message,
                        duration: 3000,
                        gravity: "bottom",
                        position: "center",
                        stopOnFocus: true,
                        style: {
                            background: bgColor,
                            borderRadius: "30px",
                            fontFamily: "'Pretendard', sans-serif",
                            fontSize: "15px",
                            fontWeight: "600",
                            padding: "12px 20px",
                            boxShadow: "0 4px 12px rgba(0, 0, 0, 0.15)"
                        }
                    }).showToast();
                }
                
                // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
                function closeModal() {
                    babyDateOverlay.classList.remove('active');
                    document.body.style.overflow = ''; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë³µêµ¬
                }
                
                // ì˜ìœ ì•„ ê²€ì§„ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ë“±ë¡ í›„ í‘œì‹œìš©)
                async function fetchBabyCheckupSchedule(birthDate) {
                    try {
                        const response = await fetch(`https://arpzgawn3f.execute-api.ap-northeast-2.amazonaws.com/prod/kidup/schedule?birthDate=${encodeURIComponent(birthDate)}`);
                        const data = await response.json();
                        return data.checkups;
                    } catch (error) {
                        console.error('ê²€ì§„ ì¼ì • ì¡°íšŒ ì˜¤ë¥˜:', error);
                        return null;
                    }
                }
                
                // í‘¸í„° ë§í¬ì— í˜¸ë²„ íš¨ê³¼ ì¶”ê°€
                const footerLinks = document.querySelectorAll('.footer-link');
                
                footerLinks.forEach(element => {
                    element.addEventListener('mouseover', function() {
                        this.style.textDecoration = 'underline';
                    });
                    
                    element.addEventListener('mouseout', function() {
                        this.style.textDecoration = 'none';
                    });
                });
                
                // ì¹´ë“œ ë° ë§í¬ì— í´ë¦­ íš¨ê³¼ ì¶”ê°€
                const interactiveElements = document.querySelectorAll('.card-link, .footer-link');
                interactiveElements.forEach(element => {
                    element.addEventListener('click', function(e) {
                        // <a> íƒœê·¸ì˜ ê¸°ë³¸ ë™ì‘ì€ ìœ ì§€
                        if (this.tagName.toLowerCase() !== 'a' || !this.getAttribute('href')) {
                            e.preventDefault();
                        }
                        
                        // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                        this.style.opacity = '0.7';
                        setTimeout(() => {
                            this.style.opacity = '1';
                        }, 200);
                    });
                });
                
                // ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì²˜ë¦¬
                function handleResponsiveLayout() {
                    const windowWidth = window.innerWidth;
                    const cards = document.querySelectorAll('.card');
                    
                    // í™”ë©´ í¬ê¸°ì— ë”°ë¥¸ ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜ ì¡°ì •
                    if (windowWidth <= 480) {
                        // ëª¨ë°”ì¼ ê¸°ê¸°ìš©
                        cards.forEach(card => {
                            card.style.animation = 'fadeInUp 0.6s ease-out';
                        });
                    } else if (windowWidth <= 768) {
                        // íƒœë¸”ë¦¿ìš©
                        cards.forEach(card => {
                            card.style.animation = 'fadeInUp 0.5s ease-out';
                        });
                    } else {
                        // ë°ìŠ¤í¬í†±ìš©
                        cards.forEach(card => {
                            card.style.animation = 'fadeInUp 0.4s ease-out';
                        });
                    }
                }
                
                // ê¸°ë³¸ ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼ ì¶”ê°€
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes fadeInUp {
                        from {
                            opacity: 0;
                            transform: translateY(20px);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                    
                    .hero-content {
                        animation: fadeInUp 0.8s ease-out;
                    }
                    
                    .card {
                        animation: fadeInUp 0.6s ease-out;
                    }
                    
                    .card:nth-child(2) {
                        animation-delay: 0.1s;
                    }
                    
                    .card:nth-child(3) {
                        animation-delay: 0.2s;
                    }
                    
                    .card:nth-child(4) {
                        animation-delay: 0.3s;
                    }
                `;
                document.head.appendChild(style);
                
                // ì´ˆê¸° í˜¸ì¶œ ë° ë¦¬ì‚¬ì´ì¦ˆ ë¦¬ìŠ¤ë„ˆ
                handleResponsiveLayout();
                window.addEventListener('resize', handleResponsiveLayout);
                
                // ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì¸í„°ì„¹ì…˜ ì˜µì €ë²„
                if ('IntersectionObserver' in window) {
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add('visible');
                            }
                        });
                    }, {
                        threshold: 0.1
                    });
                    
                    document.querySelectorAll('.card').forEach(card => {
                        observer.observe(card);
                    });
                }
            });
        </script>
    </body>
</html>
